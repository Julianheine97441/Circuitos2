Version 4
SHEET 1 2480 932
WIRE 928 -528 784 -528
WIRE 1984 -512 1840 -512
WIRE 1840 -448 1840 -512
WIRE 1856 -448 1840 -448
WIRE 176 -432 176 -448
WIRE 384 -432 384 -448
WIRE 1504 -432 1504 -464
WIRE 1504 -432 1344 -432
WIRE 1648 -432 1504 -432
WIRE 1984 -432 1984 -512
WIRE 1984 -432 1920 -432
WIRE 1344 -416 1344 -432
WIRE 1648 -416 1648 -432
WIRE 1792 -416 1792 -528
WIRE 1856 -416 1792 -416
WIRE 272 -384 240 -384
WIRE 320 -384 272 -384
WIRE 1456 -368 1408 -368
WIRE 1584 -368 1456 -368
WIRE 1456 -320 1456 -368
WIRE 1456 -320 1344 -320
WIRE 176 -304 176 -336
WIRE 272 -304 272 -384
WIRE 272 -304 176 -304
WIRE 1344 -304 1344 -320
WIRE 1648 -304 1648 -320
WIRE 384 -272 384 -336
WIRE 560 -272 384 -272
WIRE 704 -256 624 -256
WIRE 736 -256 704 -256
WIRE 1440 -256 1408 -256
WIRE 1584 -256 1440 -256
WIRE 384 -240 384 -272
WIRE 560 -240 528 -240
WIRE 624 -224 624 -240
WIRE 624 -224 592 -224
WIRE 592 -208 592 -224
WIRE 1120 -192 1120 -240
WIRE 736 -176 736 -256
WIRE 864 -176 736 -176
WIRE 1024 -176 960 -176
WIRE 1344 -176 1344 -208
WIRE 1440 -176 1440 -256
WIRE 1440 -176 1344 -176
WIRE 528 -144 528 -240
WIRE 784 -144 784 -528
WIRE 784 -144 528 -144
WIRE 384 -128 384 -160
WIRE 384 -128 352 -128
WIRE 864 -128 736 -128
WIRE 1648 -112 1648 -208
WIRE 1744 -112 1648 -112
WIRE 1792 -112 1792 -416
WIRE 1792 -112 1744 -112
WIRE 1120 -96 1120 -112
WIRE 1200 -96 1120 -96
WIRE 384 -80 384 -128
WIRE 1120 -64 1120 -96
WIRE 1344 -64 1344 -176
WIRE 1648 -64 1648 -112
WIRE 528 -16 528 -144
WIRE 544 -16 528 -16
WIRE 1200 -16 1200 -96
WIRE 1200 -16 1184 -16
WIRE 1264 -16 1200 -16
WIRE 1280 -16 1264 -16
WIRE 1728 -16 1712 -16
WIRE 672 0 608 0
WIRE 736 0 736 -128
WIRE 736 0 672 0
WIRE 384 16 384 0
WIRE 544 16 384 16
WIRE 608 32 608 16
WIRE 608 32 576 32
WIRE 576 48 576 32
WIRE 1264 64 1264 -16
WIRE 1728 64 1728 -16
WIRE 1728 64 1264 64
WIRE 1120 80 1120 32
WIRE 1344 96 1344 32
WIRE 1648 96 1648 32
WIRE 1120 208 1120 160
WIRE 592 224 512 224
WIRE 624 224 592 224
WIRE 736 224 704 224
WIRE 1344 240 1344 176
WIRE 1472 240 1344 240
WIRE 1648 240 1648 176
WIRE 1776 240 1648 240
WIRE 1472 256 1472 240
WIRE 1776 256 1776 240
WIRE 176 272 176 -304
WIRE 384 272 384 16
WIRE 592 272 592 224
WIRE 1344 272 1344 240
WIRE 1648 272 1648 240
WIRE 1344 288 1344 272
WIRE 1648 288 1648 272
WIRE 448 320 240 320
WIRE 512 320 512 224
WIRE 512 320 448 320
WIRE 528 320 512 320
WIRE 1424 352 1392 352
WIRE 1472 352 1472 336
WIRE 1728 352 1696 352
WIRE 1776 352 1776 336
WIRE 592 400 592 368
WIRE 592 400 512 400
WIRE 1024 416 1024 -176
WIRE 1728 416 1728 352
WIRE 1728 416 1024 416
WIRE 176 432 176 368
WIRE 384 432 384 368
WIRE 592 432 592 400
WIRE 976 448 976 -128
WIRE 1424 448 1424 352
WIRE 1424 448 976 448
WIRE 448 480 240 480
WIRE 512 480 512 400
WIRE 512 480 448 480
WIRE 528 480 512 480
WIRE 1344 496 1344 368
WIRE 1504 496 1344 496
WIRE 1648 496 1648 368
WIRE 1648 496 1504 496
WIRE 1504 528 1504 496
FLAG 80 -80 0
FLAG 352 -128 V6
FLAG 80 -160 V12
FLAG 384 -528 V12
FLAG 176 -528 V12
FLAG 1888 -400 0
FLAG 1888 -464 V12
FLAG 1120 208 0
FLAG 1776 352 V6
FLAG 1472 352 V6
FLAG 1120 -240 V40
FLAG 1792 -48 0
FLAG 1504 -464 V12
FLAG 1744 -112 Out
FLAG 80 96 0
FLAG 80 16 V6
FLAG 1504 528 0
FLAG 704 -336 V12
FLAG 672 -80 V12
FLAG 80 256 0
FLAG 80 176 V40
FLAG 736 224 V40
FLAG 592 528 0
FLAG 384 528 0
FLAG 176 528 0
FLAG 1008 -528 0
FLAG 592 -208 0
FLAG 592 -288 V12
FLAG 576 48 0
FLAG 576 -32 V12
SYMBOL npn 240 272 M0
SYMATTR InstName Q1
SYMATTR Value BC548B
SYMBOL npn 448 272 M0
SYMATTR InstName Q2
SYMATTR Value BC548B
SYMBOL npn 528 272 R0
SYMATTR InstName Q3
SYMATTR Value BC548B
SYMBOL pnp 240 -336 R180
SYMATTR InstName Q4
SYMATTR Value BC558C
SYMBOL pnp 320 -336 M180
SYMATTR InstName Q5
SYMATTR Value BC558C
SYMBOL res 368 -256 R0
SYMATTR InstName R1
SYMATTR Value 820
SYMBOL res 368 -96 R0
SYMATTR InstName R2
SYMATTR Value 820
SYMBOL voltage 80 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 99 Left 2
SYMATTR Value 12
SYMATTR InstName V1
SYMBOL Digital\\srflop 912 -224 R0
WINDOW 3 -40 28 Left 2
SYMATTR Value Ic=1
SYMATTR InstName A1
SYMATTR Value2 VHIGH=5
SYMBOL Opamps\\opamp2 1888 -496 R0
SYMATTR InstName U5
SYMATTR Value TL081
SYMBOL npn 1280 -64 R0
SYMATTR InstName Q6
SYMATTR Value BC548B
SYMBOL npn 1712 -64 M0
SYMATTR InstName Q7
SYMATTR Value BC548B
SYMBOL res 1328 80 R0
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL res 1632 80 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res 1760 240 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 1456 240 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL npn 1184 -64 M0
SYMATTR InstName Q8
SYMATTR Value BC548B
SYMBOL res 1104 64 R0
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 1104 -208 R0
SYMATTR InstName R9
SYMATTR Value 8.2k
SYMBOL cap 1776 -112 R0
SYMATTR InstName CL
SYMATTR Value 4.7n
SYMBOL pnp 1584 -208 M180
SYMATTR InstName Q9
SYMATTR Value BC558C
SYMBOL pnp 1408 -208 R180
SYMATTR InstName Q10
SYMATTR Value BC558C
SYMBOL voltage 80 0 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 101 Left 2
SYMATTR Value 6
SYMATTR InstName V6
SYMBOL res 688 -352 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 656 -96 R0
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res 160 -544 R0
SYMATTR InstName R14
SYMATTR Value 33
SYMBOL res 368 -544 R0
SYMATTR InstName R15
SYMATTR Value 33
SYMBOL res 720 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 50k
SYMBOL voltage 80 160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 40
SYMBOL nmos 1392 272 M0
SYMATTR InstName M1
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL nmos 1696 272 M0
SYMATTR InstName M2
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL npn 528 432 R0
SYMATTR InstName Q11
SYMATTR Value BC548B
SYMBOL npn 448 432 M0
SYMATTR InstName Q12
SYMATTR Value BC548B
SYMBOL npn 240 432 M0
SYMATTR InstName Q13
SYMATTR Value BC548B
SYMBOL pnp 1408 -320 R180
SYMATTR InstName Q14
SYMATTR Value BC558C
SYMBOL pnp 1584 -320 M180
SYMATTR InstName Q15
SYMATTR Value BC558C
SYMBOL voltage 912 -528 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(5 7 0 10u 10u 0 20u)
SYMBOL Opamps\\xcomp_x11 592 -320 R0
SYMATTR InstName U3
SYMATTR Value LM311
SYMBOL Opamps\\xcomp_x11 576 -64 R0
SYMATTR InstName U1
SYMATTR Value LM311
TEXT 408 624 Left 2 !.include standard_bjt.lib
TEXT 168 584 Left 2 !.tran 0 100u 20u
TEXT 408 600 Left 2 !.include LM393.5_1
TEXT 408 648 Left 2 !.include TL081.301
TEXT 408 672 Left 2 !.model MySW SW(Vt=1 Vh=-0.4  Ron=0.01p Roff = 1meg)
TEXT 408 576 Left 2 !.inc bs170.lib
TEXT 760 576 Left 2 !.inc LM311.301
